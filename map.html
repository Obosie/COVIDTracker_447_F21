<!DOCTYPE html>
<html lang="en">
    <head>
        <title>COVID_19_Tracker</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!--JQuery Import-->
        <script src="./jquery/jquery-3.6.0.js"></script>


        <!--Leaflet Imports-->
        <link rel="stylesheet" href="leaflet/leaflet.css">
        <script src="leaflet/leaflet.js"></script>

        <!--Map Imports-->
        <link rel="stylesheet" href="css/map.css">
        <script src="src/Merged GeoJSON/CA_merged.js"></script>


    </head>
    <body>

        <div id="map"></div>
        <script>

            var mapboxAccessToken = "pk.eyJ1IjoiYnNjaGVyeiIsImEiOiJja3ZvNzQ3MG5lNHN3MnFtYW1keWYyMnAwIn0.hN-2JumWaHsnPsBqyz9etQ";
            var map = L.map('map').setView([37.8, -96], 5);

            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=' + mapboxAccessToken, {
                        id: 'mapbox/light-v9',
                        tileSize: 512,
                        zoomOffset: -1,
                        minZoom: 4,
                        maxZoom: 8
            }).addTo(map);

            L.geoJSON(ca, {
                onEachFeature: function(feature, layer){
                    if(feature.properties){

                        var kind = feature.properties.kind;
                        var name = feature.properties.name;
                       
                        layer.bindPopup(name + " " + kind);
                    }
                }
            }).addTo(map);
        </script>
        
        <div id="userinput">
            <!-- Form does a post action to the root, which is picked up in app.js -->
            <form action="/" method="POST">
                <label>Date: </label>
                <input type="date" placeholder="Select Date" name="userdate"
                        min="2020-01-01" max="2021-12-31"><br><br> 
                <button type ="submit">Submit</button>
            </form>

            <!--Form submission under testing-->
            <script>

                var result;

                $('#userinput').submit(() => {
                    var form = $(this);
    
                    $.ajax({
                        url: form.attr('action'),
                        type: form.attr('method'),
                        dataType: 'json',
                        data: form.serialize(),
                        success: function(data){
                            
                        }
                    });
                });

                
            </script>
        </div>

        
    </body>


</html>